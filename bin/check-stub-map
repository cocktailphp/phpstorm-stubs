#!/usr/bin/env bash

set -Eeuox pipefail

readonly CURRENT_FILE_HASH=$(md5sum PhpStormStubsMap.php | awk '{ print $1 }')

# Generate the stub map again
php bin/generate-stub-map

readonly NEW_FILE_HASH=$(md5sum PhpStormStubsMap.php | awk '{ print $1 }')

if [[ "${CURRENT_FILE_HASH}" != "${NEW_FILE_HASH}" ]]; then
    echo "The commited stub map is not up to date.";

    exit 1;
fi
